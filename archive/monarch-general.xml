<tool id="monarch-general" name="Pull Information from Monarch" version="0.1.0">
    <requirements>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
	<command><![CDATA[
		curl 'https://solr.monarchinitiative.org/solr/golr/select?defType=edismax&qt=standard&indent=on&wt=csv&rows=100000&start=0&fl=subject,subject_label,relation,relation_label,object,object_label,evidence,evidence_label,source,is_defined_by,qualifier&facet=true&facet.mincount=1&facet.sort=count&json.nl=arrarr&facet.limit=25&facet.method=enum&csv.encapsulator=&csv.separator=%09&csv.header=true&csv.mv.separator=%7C&fq=subject_closure:%22${subjectClosure}%22&fq=object_category:%22${objectCategory}%22&fq=subject_category:%22${subjectCategory}%22&facet.field=subject_taxon_closure_label&facet.field=object_taxon_closure_label&q=*:*' | tail -n +2 > $output1
	]]>
	</command>
	<inputs>
	        <param  name="subjectClosure" type="text" label="Query"/>
	        <param  name="subjectCategory" type="select" label="Query Type">
			   <option value="gene">Gene (e.g. NCBIGene:3630)</option>
			   <option value="disease">Disease (e.g. DOID:14330)</option>
			   <option value="phenotype">Phenotype (e.g. HP:0000012)</option>
			   <option value="variant">Variant (e.g. ClinVarVariant:88854)</option>
			   <option value="model">Model (e.g. MGI:3850371)</option>
<!--               <option value="pathway">Pathway</option>-->
			   <option value="genotype">Genotype (e.g. dbSNPIndividual:14829)</option>
			</param>
	        <param  name="objectCategory" type="select" label="Object Category">
			   <option value="gene">Gene (e.g. NCBIGene:3630)</option>
			   <option value="disease">Disease (e.g. DOID:14330)</option>
			   <option value="phenotype">Phenotype (e.g. HP:0000012)</option>
			   <option value="variant">Variant (e.g. ClinVarVariant:88854)</option>
			   <option value="model">Model (e.g. MGI:3850371)</option>
<!--               <option value="pathway">Pathway</option>-->
			   <option value="genotype">Genotype (e.g. dbSNPIndividual:14829)</option>
			</param>
    </inputs>
    <outputs>
	        <data name="output1" type="data" format="tabular" />
    </outputs>
	 <tests>
		 <test>
			 <param name="subjectClosure" value="OMIM:127750"/>
			 <param name="subjectCategory" value="disease"/>
			 <param name="objectCategory" value="phenotype"/>
			 <output name="output1" file="output.tsv"/>
		 </test>
	 </tests>
    <help><![CDATA[
        Pulls data from monarch web services as TSV.
    ]]>
	</help>
	<citations>
		<citation type="doi">doi:10.1038/nprot.2015.124</citation>
    </citations>
</tool>
